<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Pong</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Courier New', monospace;
            color: #0f0;
        }

        #gameContainer {
            text-align: center;
        }

        #gameCanvas {
            border: 2px solid #0f0;
            background: #000;
        }

        #score {
            font-size: 24px;
            margin: 20px 0;
            text-shadow: 0 0 10px #0f0;
        }

        #instructions {
            margin-top: 20px;
            font-size: 14px;
            opacity: 0.8;
        }

        #startScreen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-size: 20px;
            text-shadow: 0 0 20px #0f0;
        }

        .blink {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="score">Player: 0 | AI: 0</div>
        <canvas id="gameCanvas" width="800" height="400"></canvas>
        <div id="instructions">Use W/S or ↑/↓ to move | SPACE to start/pause</div>
        <div id="startScreen">
            <div class="blink">PRESS SPACE TO START</div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const instructionsElement = document.getElementById('instructions');
        const startScreen = document.getElementById('startScreen');

        // Game state
        let gameRunning = false;
        let gamePaused = false;
        let playerScore = 0;
        let aiScore = 0;
        const winScore = 5;

        // Paddle properties
        const paddleWidth = 15;
        const paddleHeight = 80;
        const paddleSpeed = 6;

        // Player paddle
        const player = {
            x: 30,
            y: canvas.height / 2 - paddleHeight / 2,
            dy: 0
        };

        // AI paddle
        const ai = {
            x: canvas.width - 30 - paddleWidth,
            y: canvas.height / 2 - paddleHeight / 2,
            dy: 0
        };

        // Ball properties
        const ball = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 8,
            dx: 5,
            dy: 3,
            speed: 5
        };

        // Input handling
        const keys = {};
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            
            if (e.key === ' ') {
                e.preventDefault();
                if (!gameRunning) {
                    startGame();
                } else {
                    gamePaused = !gamePaused;
                }
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        function startGame() {
            gameRunning = true;
            gamePaused = false;
            playerScore = 0;
            aiScore = 0;
            resetBall();
            startScreen.style.display = 'none';
            gameLoop();
        }

        function resetBall() {
            ball.x = canvas.width / 2;
            ball.y = canvas.height / 2;
            ball.dx = (Math.random() > 0.5 ? 1 : -1) * ball.speed;
            ball.dy = (Math.random() * 2 - 1) * ball.speed;
        }

        function updatePlayer() {
            if (keys['w'] || keys['W'] || keys['ArrowUp']) {
                player.dy = -paddleSpeed;
            } else if (keys['s'] || keys['S'] || keys['ArrowDown']) {
                player.dy = paddleSpeed;
            } else {
                player.dy = 0;
            }

            player.y += player.dy;

            // Keep player paddle in bounds
            if (player.y < 0) player.y = 0;
            if (player.y + paddleHeight > canvas.height) {
                player.y = canvas.height - paddleHeight;
            }
        }

        function updateAI() {
            const aiCenter = ai.y + paddleHeight / 2;
            const ballCenter = ball.y;
            const diff = ballCenter - aiCenter;
            
            // AI difficulty: reacts to ball with some lag
            const aiSpeed = paddleSpeed * 0.8;
            
            if (Math.abs(diff) > 10) {
                if (diff > 0) {
                    ai.dy = aiSpeed;
                } else {
                    ai.dy = -aiSpeed;
                }
            } else {
                ai.dy = 0;
            }

            ai.y += ai.dy;

            // Keep AI paddle in bounds
            if (ai.y < 0) ai.y = 0;
            if (ai.y + paddleHeight > canvas.height) {
                ai.y = canvas.height - paddleHeight;
            }
        }

        function updateBall() {
            ball.x += ball.dx;
            ball.y += ball.dy;

            // Ball collision with top/bottom walls
            if (ball.y - ball.radius <= 0 || ball.y + ball.radius >= canvas.height) {
                ball.dy = -ball.dy;
            }

            // Ball collision with player paddle
            if (ball.x - ball.radius <= player.x + paddleWidth &&
                ball.x - ball.radius >= player.x &&
                ball.y >= player.y &&
                ball.y <= player.y + paddleHeight) {
                
                ball.dx = Math.abs(ball.dx) * 1.05; // Speed up slightly
                const relativeIntersectY = (player.y + paddleHeight / 2) - ball.y;
                const normalizedRelativeIntersectionY = relativeIntersectY / (paddleHeight / 2);
                ball.dy = -normalizedRelativeIntersectionY * ball.speed;
            }

            // Ball collision with AI paddle
            if (ball.x + ball.radius >= ai.x &&
                ball.x + ball.radius <= ai.x + paddleWidth &&
                ball.y >= ai.y &&
                ball.y <= ai.y + paddleHeight) {
                
                ball.dx = -Math.abs(ball.dx) * 1.05; // Speed up slightly
                const relativeIntersectY = (ai.y + paddleHeight / 2) - ball.y;
                const normalizedRelativeIntersectionY = relativeIntersectY / (paddleHeight / 2);
                ball.dy = -normalizedRelativeIntersectionY * ball.speed;
            }

            // Scoring
            if (ball.x < 0) {
                aiScore++;
                updateScore();
                resetBall();
                checkWin();
            }
            
            if (ball.x > canvas.width) {
                playerScore++;
                updateScore();
                resetBall();
                checkWin();
            }
        }

        function updateScore() {
            scoreElement.textContent = `Player: ${playerScore} | AI: ${aiScore}`;
        }

        function checkWin() {
            if (playerScore >= winScore) {
                gameRunning = false;
                startScreen.innerHTML = '<div style="color: #0f0; font-size: 24px;">YOU WIN!</div><div class="blink">PRESS SPACE TO PLAY AGAIN</div>';
                startScreen.style.display = 'block';
            } else if (aiScore >= winScore) {
                gameRunning = false;
                startScreen.innerHTML = '<div style="color: #f00; font-size: 24px;">AI WINS!</div><div class="blink">PRESS SPACE TO PLAY AGAIN</div>';
                startScreen.style.display = 'block';
            }
        }

        function draw() {
            // Clear canvas
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw center line
            ctx.setLineDash([5, 15]);
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.strokeStyle = '#0f0';
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.setLineDash([]);

            // Draw paddles
            ctx.fillStyle = '#0f0';
            ctx.fillRect(player.x, player.y, paddleWidth, paddleHeight);
            ctx.fillRect(ai.x, ai.y, paddleWidth, paddleHeight);

            // Draw ball
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = '#0f0';
            ctx.fill();

            // Draw pause indicator
            if (gamePaused) {
                ctx.fillStyle = '#0f0';
                ctx.font = '48px Courier New';
                ctx.textAlign = 'center';
                ctx.fillText('PAUSED', canvas.width / 2, canvas.height / 2);
            }
        }

        function gameLoop() {
            if (!gameRunning) return;

            if (!gamePaused) {
                updatePlayer();
                updateAI();
                updateBall();
            }

            draw();
            requestAnimationFrame(gameLoop);
        }

        // Initial draw
        draw();
    </script>
</body>
</html>